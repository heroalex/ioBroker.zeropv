{
    "i18n": true,
    "type": "panel",
    "items": {
        "powerSourceObject": {
            "type": "selectSendTo",
            "label": "Power source object ID",
            "help": "Select the ioBroker state containing power data (usually from Shelly energy meter)",
            "command": "getObjects",
            "jsonData": "{\"type\": \"state\", \"role\": \"value.power\"}",
            "newLine": true
        },
        "pollingInterval": {
            "type": "number",
            "label": "Polling interval (ms)",
            "help": "How often to check the power data in milliseconds",
            "min": 1000,
            "max": 300000,
            "newLine": true
        },
        "inverters": {
            "type": "table",
            "label": "Inverters",
            "help": "Configure multiple inverters for power control",
            "items": [
                {
                    "type": "selectSendTo",
                    "attr": "powerControlObject",
                    "label": "Power control object",
                    "help": "OpenDTU power control state for this inverter",
                    "command": "getObjects",
                    "jsonData": "{\"type\": \"state\", \"name\": \"*power_control*limit*\"}",
                    "width": "400px"
                },
                {
                    "type": "text",
                    "attr": "name",
                    "label": "Name",
                    "help": "Display name for this inverter",
                    "width": "200px"
                },
                {
                    "type": "number",
                    "attr": "maxPower",
                    "label": "Max power (W)",
                    "help": "Maximum power limit for this inverter",
                    "min": 0,
                    "max": 2250,
                    "default": 2250,
                    "width": "150px"
                }
            ],
            "newLine": true
        },
        "feedInThreshold": {
            "type": "number",
            "label": "Inverter limit change threshold (W)",
            "help": "Minimum change in inverter power limit to trigger control adjustment (prevents micro-adjustments)",
            "min": 50,
            "max": 1000,
            "default": 100,
            "newLine": true
        },
        "targetFeedIn": {
            "type": "number",
            "label": "Target feed-in power (W)",
            "help": "Target feed-in power (negative value for export to grid)",
            "default": -800,
            "newLine": true
        }
    }
}